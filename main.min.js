
const electron = require("electron");
var fs = require("fs");
const {app, BrowserWindow, ipcMain, remote, dialog} = electron;


let win;

const createWindow = () => {
    win = new BrowserWindow({
        show: false,
        width: 1600,
        height: 1200,
        icon: __dirname + '/images/icon.ico',
        resizable: false,
        title: "Blockchain Sniper Bot",
        autoHideMenuBar: true,
        webPreferences: {
            nodeIntegration: true,
            contextIsolation: false,
            enableRemoteModule: true,
            contextIsolation: false,
            devTools: true
        },
    })

    if (__dirname.includes (".asar")) {                            // (1)
        var exePath = app.getPath ("exe"),                         // (2)
            splitPath = exePath.replace (/\\/g, "/").split (/\//); // (3)
        
        splitPath.pop ();                                          // (4)
        exePath = splitPath.join ("/");                            // (5)
        
        var savesPath = exePath + "/locales";                // (6)
        if (!fs.existsSync (savesPath)) {
            fs.mkdirSync (savesPath);
        }
    }
    else {
        savesPath = __dirname + "/locales";
    }

    win.loadFile("index.html");
    win.webContents.on('did-finish-load', function() {
    win.show();
    win.webContents.send('LoadConfig', savesPath);
    });  
    
};

app.whenReady().then(() => {
    createWindow();
  });


ipcMain.on('ShowMessageBox', (event,options) => {
    dialog.showMessageBox(win, 
        options
       );
    // dialog.showMessageBox(titlu, mesaj);
})

